     1                                 %line 1+1 ast9procs.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33                                 
    34                                 
    35                                 
    36                                 [section .data]
    37                                 
    38                                 
    39                                 
    40                                 
    41                                 TRUE equ 1
    42                                 FALSE equ 0
    43                                 
    44                                 EXIT_SUCCESS equ 0
    45                                 
    46                                 STDIN equ 0
    47                                 STDOUT equ 1
    48                                 STDERR equ 2
    49                                 
    50                                 SYS_read equ 0
    51                                 SYS_write equ 1
    52                                 SYS_open equ 2
    53                                 SYS_close equ 3
    54                                 SYS_fork equ 57
    55                                 SYS_exit equ 60
    56                                 SYS_creat equ 85
    57                                 SYS_time equ 201
    58                                 
    59                                 LF equ 10
    60                                 SPACE equ " "
    61                                 NULL equ 0
    62                                 ESC equ 27
    63                                 
    64                                 
    65                                 
    66                                 
    67                                 SUCCESS equ 0
    68                                 NOSUCCESS equ 1
    69                                 OUTOFRANGEMIN equ 2
    70                                 OUTOFRANGEMAX equ 3
    71                                 INPUTOVERFLOW equ 4
    72                                 ENDOFINPUT equ 5
    73                                 
    74                                 LIMIT equ 1510
    75                                 
    76                                 MIN equ -100000
    77                                 MAX equ 100000
    78                                 
    79                                 BUFFSIZE equ 50
    80                                 
    81                                 
    82                                 
    83                                 
    84                                 
    85                                 
    86                                 
    87                                 [section .text]
    88                                 
    89                                 
    90                                 
    91                                 
    92                                 
    93                                 
    94                                 
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 
   100                                 
   101                                 
   102                                 
   103                                 
   104                                 
   105                                 
   106                                 
   107                                 
   108                                 
   109                                 
   110                                 
   111                                 [global readSeptNum]
   112                                 readSeptNum:
   113                                 
   114 00000000 55                      push rbp
   115 00000001 4889E5                  mov rbp, rsp
   116 00000004 4883EC33                sub rsp, 51
   117                                 
   118 00000008 53                      push rbx
   119 00000009 4154                    push r12
   120 0000000B 4155                    push r13
   121 0000000D 4156                    push r14
   122                                 
   123 0000000F 4989FC                  mov r12, rdi
   124 00000012 488D5DCE                lea rbx, byte [rbp-50]
   125 00000016 49C7C500000000          mov r13, 0
   126                                 
   127                                 charLoop:
   128                                 
   129 0000001D 48C7C000000000          mov rax, SYS_read
   130 00000024 48C7C700000000          mov rdi, STDIN
   131 0000002B 488D75CD                lea rsi, byte [rbp-51]
   132 0000002F 48C7C201000000          mov rdx, 1
   133 00000036 0F05                    syscall
   134                                 
   135 00000038 448A75CD                mov r14b, byte [rbp-51]
   136 0000003C 4180FE0A                cmp r14b, LF
   137 00000040 740D                    je breakRead
   138                                 
   139 00000042 4983FD32                cmp r13, BUFFSIZE
   140 00000046 7305                    jae skipStore
   141                                 
   142 00000048 4688342B                mov byte [rbx+r13], r14b
   143 0000004C 49FFC5                  inc r13
   144                                 skipStore:
   145 0000004F EBCA                    jmp charLoop
   146                                 breakRead:
   147                                 
   148 00000051 4983FD00                cmp r13, 0
   149 00000055 0F84BA000000            je endInput
   150                                 
   151 0000005B 4983FD32                cmp r13, BUFFSIZE
   152 0000005F 720A                    jb nullInput
   153                                 
   154 00000061 48C7C004000000          mov rax, INPUTOVERFLOW
   155 00000068 E9B0000000              jmp funcDone
   156                                 
   157                                 nullInput:
   158                                 
   159 0000006D 42C6042B00              mov byte [rbx+r13], NULL
   160 00000072 49C7C600000000          mov r14, 0
   161 00000079 49C7C300000000          mov r11, 0
   162                                 
   163                                 convertLoop:
   164                                 
   165 00000080 468A1C33                mov r11b, byte [rbx+r14]
   166 00000084 4180FB20                cmp r11b, " "
   167 00000088 7503                    jne next
   168 0000008A 49FFC6                  inc r14
   169 0000008D EBEF                    jmp convertLoop
   170                                 
   171                                 next:
   172                                 
   173 0000008F 49C7C001000000          mov r8, 1
   174 00000096 4180FB2B                cmp r11b, "+"
   175 0000009A 740B                    je positive
   176                                 
   177 0000009C 4180FB2D                cmp r11b, "-"
   178 000000A0 7538                    jne setNoSucc
   179 000000A2 49C7C0FFFFFFFF          mov r8, -1
   180                                 
   181                                 positive:
   182                                 
   183 000000A9 49FFC6                  inc r14
   184 000000AC B800000000              mov eax, 0
   185                                 
   186                                 convLoop:
   187 000000B1 468A1C33                mov r11b, byte [rbx+r14]
   188                                 
   189 000000B5 4180FB00                cmp r11b, NULL
   190 000000B9 7428                    je loopExit
   191                                 
   192 000000BB 4180FB30                cmp r11b, 0x30
   193 000000BF 7C19                    jl setNoSucc
   194                                 
   195 000000C1 4180FB36                cmp r11b, 0x36
   196 000000C5 7F13                    jg setNoSucc
   197                                 
   198 000000C7 4180EB30                sub r11b, 0x30
   199                                 
   200 000000CB 41B907000000            mov r9d, 7
   201 000000D1 41F7E1                  mul r9d
   202 000000D4 4401D8                  add eax, r11d
   203                                 
   204 000000D7 49FFC6                  inc r14
   205 000000DA EBD3                    jmp convLoop
   206                                 
   207                                 setNoSucc:
   208                                 
   209 000000DC 48C7C001000000          mov rax, NOSUCCESS
   210 000000E3 EB3B                    jmp funcDone
   211                                 
   212                                 loopExit:
   213                                 
   214 000000E5 41F7E8                  imul r8d
   215 000000E8 41890424                mov dword [r12], eax
   216                                 
   217 000000EC 41813C246079FEFF        cmp dword [r12], MIN
   218 000000F4 7C11                    jl minError
   219                                 
   220 000000F6 41813C24A0860100        cmp dword [r12], MAX
   221 000000FE 7F10                    jg maxError
   222                                 
   223 00000100 48C7C000000000          mov rax, SUCCESS
   224 00000107 EB17                    jmp funcDone
   225                                 
   226                                 minError:
   227                                 
   228 00000109 48C7C002000000          mov rax, OUTOFRANGEMIN
   229 00000110 EB0E                    jmp funcDone
   230                                 
   231                                 maxError:
   232                                 
   233 00000112 48C7C003000000          mov rax, OUTOFRANGEMAX
   234 00000119 EB05                    jmp funcDone
   235                                 
   236                                 endInput:
   237                                 
   238 0000011B 48C7C005000000          mov rax, ENDOFINPUT
   239                                 
   240                                 funcDone:
   241                                 
   242 00000122 415E                    pop r14
   243 00000124 415D                    pop r13
   244 00000126 415C                    pop r12
   245 00000128 5B                      pop rbx
   246                                 
   247 00000129 4889EC                  mov rsp, rbp
   248 0000012C 5D                      pop rbp
   249                                 
   250 0000012D C3                      ret
   251                                 
   252                                 
   253                                 
   254                                 
   255                                 
   256                                 
   257                                 
   258                                 
   259                                 
   260                                 
   261                                 
   262                                 
   263                                 
   264                                 
   265                                 
   266                                 [global shellSort]
   267                                 shellSort:
   268                                 
   269 0000012E 55                     push rbp
   270 0000012F 4889E5                 mov rbp, rsp
   271 00000132 4883EC10               sub rsp, 16
   272                                 
   273 00000136 4154                   push r12
   274 00000138 4150                   push r8
   275 0000013A 4153                   push r11
   276                                 
   277 0000013C C745FC01000000         mov dword [rbp-4], 1
   278 00000143 41B803000000           mov r8d, 3
   279                                 
   280                                 loopOne:
   281                                 
   282 00000149 8B45FC                  mov eax, dword [rbp-4]
   283 0000014C 41F7E8                  imul r8d
   284 0000014F 83C001                  add eax, 1
   285                                 
   286 00000152 39F0                    cmp eax, esi
   287 00000154 7D03                    jge jumpOne
   288 00000156 8945FC                  mov dword [rbp-4], eax
   289 00000159 EBEC                    jmp loopOne
   290                                 jumpOne:
   291                                 
   292 0000015B 4189F2                 mov r10d, esi
   293                                 
   294                                 loopTwo:
   295                                 
   296 0000015E 837DFC00                cmp dword [rbp-4], 0
   297 00000162 7E72                    jle jumpTwo
   298                                 
   299 00000164 8B45FC                  mov eax, dword [rbp-4]
   300 00000167 83E801                  sub eax, 1
   301 0000016A 8945F8                  mov dword [rbp-8], eax
   302                                 
   303                                  loopThree:
   304                                 
   305 0000016D 443955F8                cmp dword [rbp-8], r10d
   306 00000171 7D51                    jge jumpThree
   307                                 
   308 00000173 448B5DF8                mov r11d, dword [rbp-8]
   309                                 
   310 00000177 468B049F                mov r8d, dword [rdi+r11*4]
   311 0000017B 448945F4                mov dword [rbp-12], r8d
   312                                 
   313 0000017F 44895DF0                mov dword [rbp-16], r11d
   314                                 
   315                                  loopFour:
   316 00000183 448B5DF0                mov r11d, dword [rbp-16]
   317 00000187 443B5DFC                cmp r11d, dword [rbp-4]
   318 0000018B 7C26                    jl jumpFour
   319                                 
   320 0000018D 448B5DF4                mov r11d, dword [rbp-12]
   321 00000191 448B65F0                mov r12d, dword [rbp-16]
   322 00000195 442B65FC                sub r12d, dword [rbp-4]
   323 00000199 46391CA7                cmp dword [rdi+r12*4], r11d
   324 0000019D 7E14                    jle jumpFour
   325                                 
   326 0000019F 468B0CA7                mov r9d, dword [rdi+r12*4]
   327 000001A3 448B5DF0                mov r11d, dword [rbp-16]
   328 000001A7 46890C9F                mov dword [rdi+r11*4], r9d
   329                                 
   330 000001AB 448B5DFC                mov r11d, dword [rbp-4]
   331 000001AF 44295DF0                sub dword [rbp-16], r11d
   332                                 
   333 000001B3 EBCC                    jmp loopFour
   334                                  jumpFour:
   335                                 
   336 000001B5 448B45F4                mov r8d, dword [rbp-12]
   337 000001B9 448B5DF0                mov r11d, dword [rbp-16]
   338 000001BD 4689049F                mov dword [rdi+r11*4], r8d
   339                                 
   340 000001C1 FF45F8                  inc dword [rbp-8]
   341                                 
   342 000001C4 EBA5                    jmp loopThree
   343                                  jumpThree:
   344                                 
   345 000001C6 41B903000000            mov r9d, 3
   346 000001CC 8B45FC                  mov eax, dword [rbp-4]
   347 000001CF 99                      cdq
   348 000001D0 41F7F9                  idiv r9d
   349 000001D3 8945FC                  mov dword [rbp-4], eax
   350                                 
   351 000001D6 EB84                    jmp loopTwo
   352                                 jumpTwo:
   353                                 
   354 000001D8 415B                    pop r11
   355 000001DA 4158                    pop r8
   356 000001DC 415C                    pop r12
   357                                 
   358 000001DE 4889EC                  mov rsp, rbp
   359 000001E1 5D                      pop rbp
   360                                 
   361 000001E2 C3                      ret
   362                                 
   363                                 
   364                                 
   365                                 
   366                                 
   367                                 
   368                                 
   369                                 
   370                                 
   371                                 
   372                                 
   373                                 
   374                                 
   375                                 
   376                                 
   377                                 
   378                                 
   379                                 
   380                                 
   381                                 
   382                                 
   383                                 
   384                                 [global basicStats]
   385                                 basicStats:
   386                                 
   387 000001E3 55                      push rbp
   388 000001E4 4889E5                  mov rbp, rsp
   389 000001E7 4151                    push r9
   390 000001E9 53                      push rbx
   391 000001EA 52                      push rdx
   392 000001EB 4150                    push r8
   393 000001ED 51                      push rcx
   394                                 
   395 000001EE 8B07                    mov eax, dword [rdi]
   396 000001F0 8902                    mov dword [rdx], eax
   397                                 
   398 000001F2 8B44B7FC                mov eax, dword [rdi+(rsi-1)*4]
   399 000001F6 418900                  mov dword [r8], eax
   400                                 
   401 000001F9 41BA02000000            mov r10d, 2
   402 000001FF 89F0                    mov eax, esi
   403 00000201 99                      cdq
   404 00000202 41F7FA                  idiv r10d
   405 00000205 4189C3                  mov r11d, eax
   406                                 
   407 00000208 83FA00                  cmp edx, 0
   408 0000020B 7407                    je jumpFive
   409 0000020D 468B149F                mov r10d, dword [rdi+r11*4]
   410 00000211 448911                  mov dword [rcx], r10d
   411 00000214 EB0C                    jmp jumpSix
   412                                 jumpFive:
   413 00000216 428B049F                mov eax, dword [rdi+r11*4]
   414 0000021A 4203449FFC              add eax, dword [rdi+(r11-1)*4]
   415 0000021F 41F7FA                  idiv r10d
   416 00000222 8901                    mov dword [rcx], eax
   417                                 jumpSix:
   418                                 
   419 00000224 E812000000              call lstSum
   420 00000229 418901                  mov dword [r9], eax
   421                                 
   422 0000022C E824000000              call lstAve
   423 00000231 488B5D10                mov rbx, qword [rbp+16]
   424 00000235 8903                    mov dword [rbx], eax
   425                                 
   426 00000237 59                      pop rcx
   427 00000238 4158                    pop r8
   428 0000023A 5A                      pop rdx
   429 0000023B 5B                      pop rbx
   430 0000023C 4159                    pop r9
   431 0000023E 5D                      pop rbp
   432                                 
   433 0000023F C3                      ret
   434                                 
   435                                 
   436                                 
   437                                 
   438                                 
   439                                 
   440                                 
   441                                 
   442                                 
   443                                 
   444                                 
   445                                 
   446                                 
   447                                 
   448                                 
   449                                 [global lstSum]
   450                                 lstSum:
   451                                 
   452 00000240 49C7C000000000          mov r8, 0
   453 00000247 89F1                    mov ecx, esi
   454 00000249 48C7C000000000          mov rax, 0
   455                                 
   456                                 loopFive:
   457 00000250 42030487                add eax, dword [rdi+r8*4]
   458                                 
   459 00000254 49FFC0                  inc r8
   460 00000257 E2F5                    loop loopFive
   461                                 
   462 00000259 C3                      ret
   463                                 
   464                                 
   465                                 
   466                                 
   467                                 
   468                                 
   469                                 
   470                                 
   471                                 
   472                                 
   473                                 
   474                                 
   475                                 
   476                                 
   477                                 
   478                                 
   479                                 [global lstAve]
   480                                 lstAve:
   481                                 
   482 0000025A E8DCFFFFFF              call lstSum
   483                                 
   484 0000025F 99                      cdq
   485 00000260 F7FE                    idiv esi
   486                                 
   487 00000262 C3                      ret
   488                                 
   489                                 
   490                                 
   491                                 
   492                                 
   493                                 
   494                                 
   495                                 
   496                                 
   497                                 
   498                                 
   499                                 
   500                                 
   501                                 
   502                                 
   503                                 
   504                                 
   505                                 
   506                                 
   507                                 
   508                                 
   509                                 [global linearRegression]
   510                                 linearRegression:
   511                                 
   512 00000263 55                      push rbp
   513 00000264 4889E5                  mov rbp, rsp
   514 00000267 4883EC0C                sub rsp, 12
   515                                 
   516 0000026B 52                      push rdx
   517 0000026C 4150                    push r8
   518 0000026E 4151                    push r9
   519 00000270 4152                    push r10
   520 00000272 4153                    push r11
   521                                 
   522 00000274 48C745F800000000        mov qword [rbp-8], 0
   523 0000027C C745F400000000          mov dword [rbp-12], 0
   524 00000283 4189D2                  mov r10d, edx
   525 00000286 4152                    push r10
   526 00000288 49C7C300000000          mov r11, 0
   527 0000028F 49C7C600000000          mov r14, 0
   528                                 
   529                                 loopSix:
   530                                 
   531 00000296 468B249F                mov r12d, dword [rdi+r11*4]
   532 0000029A 4129CC                  sub r12d, ecx
   533                                 
   534 0000029D 468B2C9E                mov r13d, dword [rsi+r11*4]
   535 000002A1 4529C5                  sub r13d, r8d
   536                                 
   537 000002A4 4489E0                  mov eax, r12d
   538 000002A7 BA00000000              mov edx, 0
   539 000002AC 41F7ED                  imul r13d
   540 000002AF 8945F8                  mov dword [rbp-8], eax
   541 000002B2 8955FC                  mov dword [rbp-4], edx
   542 000002B5 4C0375F8                add r14, qword [rbp-8]
   543                                 
   544 000002B9 49FFC3                  inc r11
   545                                 
   546 000002BC 41FFCA                  dec r10d
   547 000002BF 4183FA00                cmp r10d, 0
   548 000002C3 75CF                    jne loopSix
   549                                 
   550 000002C5 4C8975F8                mov qword [rbp-8], r14
   551 000002C9 41BB00000000            mov r11d, 0
   552 000002CF 415A                    pop r10
   553                                 
   554                                 loopSeven:
   555                                 
   556 000002D1 468B249F                mov r12d, dword [rdi+r11*4]
   557 000002D5 4129CC                  sub r12d, ecx
   558                                 
   559 000002D8 4489E0                  mov eax, r12d
   560 000002DB F7E8                    imul eax
   561 000002DD 0145F4                  add dword [rbp-12], eax
   562                                 
   563 000002E0 41FFC3                  inc r11d
   564                                 
   565 000002E3 41FFCA                  dec r10d
   566 000002E6 4183FA00                cmp r10d, 0
   567 000002EA 75E3                    jne loopSeven
   568                                 
   569 000002EC 488B45F8                mov rax, qword [rbp-8]
   570 000002F0 4899                    cqo
   571 000002F2 4C637DF4                movsxd r15, dword [rbp-12]
   572 000002F6 49F7FF                  idiv r15
   573                                 
   574 000002F9 4989C2                  mov r10, rax
   575                                 
   576 000002FC F7E9                    imul ecx
   577 000002FE 4129C0                  sub r8d, eax
   578 00000301 4D8901                  mov qword [r9], r8
   579                                 
   580 00000304 488B5D10                mov rbx, qword [rbp+16]
   581 00000308 4C8913                  mov qword [rbx], r10
   582                                 
   583 0000030B 415B                    pop r11
   584 0000030D 415A                    pop r10
   585 0000030F 4159                    pop r9
   586 00000311 4158                    pop r8
   587 00000313 5A                      pop rdx
   588                                 
   589 00000314 4889EC                  mov rsp, rbp
   590 00000317 5D                      pop rbp
   591                                 
   592 00000318 C3                      ret
   593                                 
   594                                 
   595                                 last:
   596 00000319 48C7C03C000000          mov rax, SYS_exit
   597 00000320 48C7C700000000          mov rdi, EXIT_SUCCESS
   598 00000327 0F05                    syscall
